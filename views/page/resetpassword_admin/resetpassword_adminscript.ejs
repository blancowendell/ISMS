<!-- <script>
    $(document).ready(function () {
      // When the reset password button is clicked
      $("#resetPassWord").click(function () {
        const newPassword = $("#newPassword").val();
        const confirmPassword = $("#confirmPassword").val();
        const token = new URLSearchParams(window.location.search).get('token'); // Assuming the token is passed in the URL query
  
        if (!newPassword || !confirmPassword) {
          toastr.error("Both fields are required", "Error");
          return;
        }
  
        if (newPassword !== confirmPassword) {
          toastr.error("Passwords do not match", "Error");
          return;
        }
        $.ajax({
          type: "POST",
          url: "/resetpassword/change-password",
          data: JSON.stringify({
            token: token,
            newPassword: newPassword
          }), // Send token and new password as JSON
          contentType: "application/json", // Set content type to JSON
          success: function (result) {
            if (result.msg === "success") {
              toastr.success("Password successfully updated", "Success");
              // Optionally, redirect to login page after the password is updated
              setTimeout(function () {
                window.location.href = "/student_login";
              }, 2000);
            } else {
              toastr.error(result.message || "Error updating password", "Error");
            }
          },
          error: function (err) {
            toastr.error(err.responseJSON.message || "Failed to update password", "Error");
          },
        });
      });
    });
  </script>
   -->

   <script>
    $(document).ready(function () {
      // When the reset password button is clicked
      $("#resetPassWord").click(function () {
        const newPassword = $("#newPassword").val();
        const confirmPassword = $("#confirmPassword").val();
        const token = new URLSearchParams(window.location.search).get('token'); // Assuming the token is passed in the URL query
  
        if (!newPassword || !confirmPassword) {
          Swal.fire({
            title: "Error",
            text: "Both fields are required",
            icon: "error",
            confirmButtonText: "OK"
          });
          return;
        }
  
        if (newPassword !== confirmPassword) {
          Swal.fire({
            title: "Error",
            text: "Passwords do not match",
            icon: "error",
            confirmButtonText: "OK"
          });
          return;
        }
  
        $.ajax({
          type: "POST",
          url: "/resetpassword_admin/change-password",
          data: JSON.stringify({
            token: token,
            newPassword: newPassword
          }), // Send token and new password as JSON
          contentType: "application/json", // Set content type to JSON
          success: function (result) {
            if (result.msg === "success") {
              swal({
                title: "Success",
                text: "Password successfully updated",
                icon: "success",
                confirmButtonText: "OK"
              }).then(() => {
                // Optionally, redirect to login page after the password is updated
                window.location.href = "/";
              });
            } else {
              swal({
                title: "Error",
                text: result.message || "Error updating password",
                icon: "error",
                confirmButtonText: "OK"
              });
            }
          },
          error: function (err) {
            swal({
              title: "Error",
              text: err.responseJSON.message || "Failed to update password",
              icon: "error",
              confirmButtonText: "OK"
            });
          },
        });
      });
    });
  </script>
  
  