<script>
  $(document).ready(function () {
    console.log("Initialize");
    $(document).on("click", "#createbtn", function () {
      let studentId = $("#studentid").val();
      let userName = $("#username").val();
      let passWord = $("#password").val();
      let confirmPassWord = $("#confirmpassword").val();

      var message = "";

      if (studentId == "") {
        message += "Student ID is required. ";
      }

      if (userName == "") {
        message += "Username is required. ";
      }

      if (passWord == "") {
        message += "Password is required. ";
      }

      if (confirmPassWord == "") {
        message += "Confirm Password is required. ";
      }

      if (message !== "") {
        swal("Validation Error", message, "error");
      } else {
        $.ajax({
          type: "POST",
          url: "/createuser/save",
          data: {
            studentid: studentId,
            username: userName,
            password: passWord,
          },
          success: function (result) {
            if (result.msg == "success") {
              swal({
                title: "Saved Successfully",
                text: "You clicked the button!",
                icon: "success",
                button: "OK!",
              }).then((results) => {
                window.location.reload();
              });
            } else {
              swal({
                title: "Exist",
                text: "Data already exists!",
                icon: "warning",
                button: "OK!",
              });
            }
          },
          error: function (err) {
            swal("Data already exist!", "You clicked the button!", "warning");
          },
        });
      }
    });

    $(".toggle-password").on("click", function () {
      const targetSelector = $(this).data("target");
      const passwordInput = $(targetSelector);
      const passwordFieldType = passwordInput.attr("type");
      if (passwordFieldType === "password") {
        passwordInput.attr("type", "text");
        $(this).find("i").removeClass("fa-eye").addClass("fa-eye-slash");
      } else {
        passwordInput.attr("type", "password");
        $(this).find("i").removeClass("fa-eye-slash").addClass("fa-eye");
      }
    });
  });
</script>
